结论:
如果a0 + a1 + ... + an = 1, 则<a0, a1, ..., an>, <a1, a2, ..., an, a0>, <a2, a3, ..., an, a0, a1>...<an, a0, a1, ..., an-1>中有且只有一个是perfect sequence.

那么题目中所有满足题意的序列有C(mn+1, n)个，可以将这些序列按照循环分组，可以证明每个组中恰有mn+1个(就是说不可能出现一个序列循环少于mn+1次又变回自己，理由是mn+1和n互质),这样恰有C(mn+1, n)/(mn+1)个序列是perfect的。再有: 对质数p, 有1/a = a^(p-2) (mod p)(费马小定理)。
时间复杂度O(n * log(p))